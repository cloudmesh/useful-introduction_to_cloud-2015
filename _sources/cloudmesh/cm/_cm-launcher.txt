
Command Shell Orchestration Tool (Launcher)
===========================================

.. raw:: html

   <button type="button" class="btn btn-default navbar-btn">

`Notebook <http://localhost:8888/notebooks/docs/source/cloudmesh/cm/_cm-launcher.ipynb>`__

.. raw:: html

   </button>

Launcher provides orchestration for creating ready-to-use cloud
applications with Chef Cookbooks and shell scripts.

.. note: Openstack is only supported at the current development.

IPython Alias
~~~~~~~~~~~~~

With the alias command we simply define a new command with the name cm
that we can call directly from IPython. Here we make sure that the
parameters ar between "" so that they are properly set. Just execute the
following lines.

.. code:: python

    alias cm cm %s
Launcher import command
-----------------------

Launcher registers local cookbooks from the yaml file
(cloudmesh\_launcher.yaml)

.. code:: python

    cm launcher import

.. parsed-literal::

    launcher 'bigdata_mooc' added.
    launcher 'slurm' added.
    launcher 'hadoop' added.
    launcher 'ganglia' added.
    launcher 'nagios' added.


Launcher menu command
---------------------

``menu`` command provides available local cookbooks that are registered
by ``import``. These cookbooks represent Chef Cookbooks registered in
Cloudmesh. You can choose one of the names to start ``Launcher``.

.. note:: Registered Cookbooks can be found at:
https://github.com/cloudmesh/chef

.. code:: python

    cm launcher menu

.. parsed-literal::

    +--------------+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | launcher     | name                 | description                                                                                                                                                      |
    +--------------+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | bigdata_mooc | Big Data Class at IU | Deploys an Image for a class taught on Big Data.                                                                                                                 |
    |              |                      |                                                                                                                                                                  |
    | ganglia      | Ganglia              | Deploys a Ganglia service for the vms specified. The ganglia server will be the first node in the list.                                                          |
    |              |                      |                                                                                                                                                                  |
    | hadoop       | Hadoop               | Deploys a haddop cluster on the VMs specified                                                                                                                    |
    |              |                      |                                                                                                                                                                  |
    | nagios       | Nagios               | Deploys a Nagios service for the vms specified. The ganglia server will be the first node in the list.                                                           |
    |              |                      |                                                                                                                                                                  |
    | slurm        | Slurm Cluster        | Deploys a Slurm cluster. One of the Vms is the Master, while the others register with the master as worker nodes. The master will be the first node in the list. |
    |              |                      |                                                                                                                                                                  |
    +--------------+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+


Launcher start command
----------------------

If you decide which cookbook you are going to use, you are ready to
create a new ``Launcher`` with the cookbook name. In this tutorial, we
use ``bigdata_mooc`` as a desired cookbook.

.. code:: python

    cm launcher start bigdata_mooc

.. parsed-literal::

    * india
    Refreshing hrlee servers india ->
    Refresh time: 0.219480037689
    Store time: 0.0358941555023


Launcher list command
---------------------

If your launcher has been successfully created, you can see it in the
list of running launchers with ``list`` command.

.. code:: python

    cm launcher list
Launcher stop command
---------------------

``stop`` command terminates your launcher.

.. code:: python

    # cm launcher stop launcher-$USERNAME-bigdata_mooc-$RAND
Launcher export command
-----------------------

Your loaded cookbooks in the database can be exported to a yaml file
with ``export`` command. For example, we can generate a
``/tmp/cloudmesh_launcher.yaml`` file by exporting a registered
cookbooks in the database.

.. code:: python

    cm launcher export /tmp/cloudmesh_launcher.yaml
