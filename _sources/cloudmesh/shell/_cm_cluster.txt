
Create a Virtual Cluster
========================

First import cloudmesh.

.. code:: python

    import cloudmesh

Use command cluster to start a cluster of VMs, and each of them can log
into all others. please refer to:

Before you start a virtual cluster, please need to make susre that you
set a number of defaults. This includes:

.. code:: python

    print cloudmesh.shell("cluster")

1. select a cloud::

cm cloud select india

2. activate the cloud::

cm cloud on india

3. set the default key::

cm key default [NAME]

5. set a default image from the list of images::

cm default image

6. set a default flavor from the list of flavors::

cm default flavor

After this you may start the cluster with command::

cm cluster create

while specifying a number of parameters:

name

the unique name for this cluster

--count number

the numebr of VMs in the cluster

--ln name

the login name, for example 'ubuntu'

Note: --ln may be changed to --login

To list the clusters you can use the command

.. code:: python

    print cloudmesh.shell("cluster")

To create a cluster you can use the command

.. code:: python

    print cloudmesh.shell("cluster create cm_cluster1 --count=3 --ln=ubuntu")

You may also provide cloud name, flavor or image in the command if you
don't want to pre-set them. For example:

.. code:: python

    print cloudmesh.shell("cluster create "
                          "cm_cluster1 "
                          "--count=3 "
                          "--ln=ubuntu "
                          "--cloud=india "
                          "--flavor=m1.small "
                          "--image=futuresystems/ubuntu-14.04")
